<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Lazy blogging with jekyll | Mero's Blog</title><meta name=keywords content="meta,programming"><meta name=description content="I put up a small script to automate creating blog-posts in jekyll"><meta name=author content><link rel=canonical href=https://blog.merovius.de/posts/2013-09-28-lazy-blogging-with-jekyll/><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.merovius.de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.merovius.de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.merovius.de/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.merovius.de/apple-touch-icon.png><link rel=mask-icon href=https://blog.merovius.de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Lazy blogging with jekyll"><meta property="og:description" content="I put up a small script to automate creating blog-posts in jekyll"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.merovius.de/posts/2013-09-28-lazy-blogging-with-jekyll/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-09-28T15:11:10+00:00"><meta property="article:modified_time" content="2013-09-28T15:11:10+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lazy blogging with jekyll"><meta name=twitter:description content="I put up a small script to automate creating blog-posts in jekyll"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.merovius.de/posts/"},{"@type":"ListItem","position":2,"name":"Lazy blogging with jekyll","item":"https://blog.merovius.de/posts/2013-09-28-lazy-blogging-with-jekyll/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Lazy blogging with jekyll","name":"Lazy blogging with jekyll","description":"I put up a small script to automate creating blog-posts in jekyll","keywords":["meta","programming"],"articleBody":"tl;dr: I put up a small script to automate creating blog-posts in jekyll\nIf you think about setting up your own blog, jekyll seems to be an appropriate choice. This short guide should put you through the process of having an easy setup for writing and deploying your blog via your favourite editor (vim) and your favourite version control system (git) to a publicly available server via ssh.\nFirst thing you will need, is to have jekyll installed on both machines (the ones where you will write your posts and the one where you will deploy them to). Because the debian-version appears to be horribly outdated, I installed it via gem. As far as I understood, this has the advantage of making an installation without root-privileges possible. You should also have git available on both machines.\nInitializing your blog is pretty easy, jekyll new mynewblog (on your local machine) should suffice. You still want to do some configuration and customization, most of which should be straight-forward. Edit the index.html, the _config.yml and the _layouts/default.html. You might also want to have an Atom-template, so people can subscribe to your blog in their favourite RSS-reader. My good friend Stefan helped with that just put that file into the root of your blog-directory, edit your blogtitle and everything into it and add the line link rel=\"alternate\" type=\"application/atom+xml\" href=\"/atom.xml\" title=\"Atom feed\" in the  section of _layouts/default.html.\nNext thing is setting up deployment. Just git init a blog, git add every configuration file, page, template and whatnot and git commit it. ssh onto your deployment-machine and do a git init --bare blog.git. Save the following file to blog.git/hooks/post-update and change the path to point to a directory, that is served by your http-server: {% gist 6736709 post-update %} Everytime you push into blog.git you will then have jekyll automatically rebuild your blog. You now only have to do the following on your local machine to deploy your blog:\ngit remote add origin username@example.com:blog.git git push --set-upstream origin master Now to the really fancy stuff. Jekyll expects your blogposts to live under the _posts-directory under a special filename-format and to have a YAML-preamble, containing some configuration. It can be quite cumbersome to manage this yourself, so I wrote a shellscript to ease the process. Put it anywhere in your path (i chose the name newpost) and make it executable.\nWhen you run the script, it will look into the current directory for a jekyll-blog and create a draft from a small template given in the script. It will then optionally run a jekyll-development server, so that you can preview your blog-post in your browser (by saving the draft) and open the draft in your favourite editor. After you close your editor, the jekyll server will be stopped and the draft will be saved under _posts/YYYY-MM-DD-abbrev-title.fmt, where YYYY-MM-DD is the current date (date and time will also be automatically added to the YAML-preamble), fmt is a configurable format (markdown is default) and abbrev-title is a short string derived from the title you put in.\nThere will also (optionally) be a git-commit created with a default commit-message. You can edit the message in an editor and abort the commit, by deleting everything and saving an empty commit-message. If you really want (though I would not advise it) you can also automatically push it, after you’re done.\nAfter this setup, to create a new blogpost, you just have to cd to your blog-repository, run newpost, type your blogpost (and add a title), preview it in your browsers, exit your editor and you have everything ready to push. It can’t get much easier.\n","wordCount":"604","inLanguage":"en","datePublished":"2013-09-28T15:11:10Z","dateModified":"2013-09-28T15:11:10Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.merovius.de/posts/2013-09-28-lazy-blogging-with-jekyll/"},"publisher":{"@type":"Organization","name":"Mero's Blog","logo":{"@type":"ImageObject","url":"https://blog.merovius.de/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.merovius.de/ accesskey=h title="Mero's Blog (Alt + H)">Mero's Blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Lazy blogging with jekyll</h1><div class=post-meta><span title="2013-09-28 15:11:10 +0000 UTC">September 28, 2013</span></div></header><div class=post-content><p><strong>tl;dr: I put up a <a href=https://gist.github.com/Merovius/6736709>small script</a> to
automate creating blog-posts in jekyll</strong></p><p>If you think about setting up your own blog, jekyll seems to be an appropriate
choice. This short guide should put you through the process of having an easy
setup for writing and deploying your blog via your favourite editor (vim) and
your favourite version control system (git) to a publicly available server via
ssh.</p><p>First thing you will need, is to have jekyll installed on both machines (the
ones where you will write your posts and the one where you will deploy them to).
Because the debian-version appears to be horribly outdated, I installed it via
gem. As far as I understood, this has the advantage of making an installation
without root-privileges possible. You should also have git available on both
machines.</p><p>Initializing your blog is pretty easy, <code>jekyll new mynewblog</code> (on your local
machine) should suffice. You still want to do some configuration and
customization, most of which should be straight-forward. Edit the <code>index.html</code>,
the <code>_config.yml</code> and the <code>_layouts/default.html</code>. You might also want to have
an Atom-template, so people can subscribe to your blog in their favourite
RSS-reader. My good friend Stefan <a href="https://git.yrden.de/?p=blog.git/.git;a=blob;f=atom.xml;hb=HEAD">helped with
that</a> just put
that file into the root of your blog-directory, edit your blogtitle and
everything into it and add the line<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;alternate&#34;</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;application/atom+xml&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/atom.xml&#34;</span> <span style=color:#a6e22e>title</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Atom feed&#34;</span>&gt;</span></span></code></pre></div>in the <code>&lt;head></code> section of <code>_layouts/default.html</code>.</p><p>Next thing is setting up deployment. Just <code>git init</code> a blog, <code>git add</code> every
configuration file, page, template and whatnot and <code>git commit</code> it. ssh onto
your deployment-machine and do a <code>git init --bare blog.git</code>. Save the following
file to <code>blog.git/hooks/post-update</code> and change the path to point to a
directory, that is served by your http-server:
{% gist 6736709 post-update %}
Everytime you push into <code>blog.git</code> you will then have jekyll automatically
rebuild your blog. You now only have to do the following on your local machine
to deploy your blog:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git remote add origin username@example.com:blog.git
</span></span><span style=display:flex><span>git push --set-upstream origin master
</span></span></code></pre></div><p>Now to the really fancy stuff. Jekyll expects your blogposts to live under the
<code>_posts</code>-directory under a special filename-format and to have a YAML-preamble,
containing some configuration. It can be quite cumbersome to manage this
yourself, so I wrote a <a href=https://gist.github.com/Merovius/6736709>shellscript</a>
to ease the process. Put it anywhere in your path (i chose the name <code>newpost</code>)
and make it executable.</p><p>When you run the script, it will look into the current directory for a
jekyll-blog and create a draft from a small template given in the script. It
will then optionally run a jekyll-development server, so that you can preview
your blog-post in your browser (by saving the draft) and open the draft in your
favourite editor. After you close your editor, the jekyll server will be
stopped and the draft will be saved under <code>_posts/YYYY-MM-DD-abbrev-title.fmt</code>,
where <code>YYYY-MM-DD</code> is the current date (date and time will also be automatically
added to the YAML-preamble), <code>fmt</code> is a configurable format (markdown is default)
and <code>abbrev-title</code> is a short string derived from the title you put in.</p><p>There will also (optionally) be a git-commit created with a default
commit-message. You can edit the message in an editor and abort the commit, by
deleting everything and saving an empty commit-message. If you really want
(though I would not advise it) you can also automatically push it, after you&rsquo;re
done.</p><p>After this setup, to create a new blogpost, you just have to <code>cd</code> to your
blog-repository, run <code>newpost</code>, type your blogpost (and add a title), preview it
in your browsers, exit your editor and you have everything ready to push. It
can&rsquo;t get much easier.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.merovius.de/tags/meta/>meta</a></li><li><a href=https://blog.merovius.de/tags/programming/>programming</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://blog.merovius.de/>Mero's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>